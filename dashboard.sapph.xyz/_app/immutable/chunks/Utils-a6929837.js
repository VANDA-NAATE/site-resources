import{_ as R}from"./preload-helper-995db135.js";import{h as L,d as j}from"./humanize-duration-e6c2c45c.js";import{w as S}from"./index-2eba6212.js";const T={Default:0,White:16777215,Aqua:1752220,Green:5763719,Blue:3447003,Yellow:16705372,Purple:10181046,LuminousVividPink:15277667,Fuchsia:15418782,Gold:15844367,Orange:15105570,Red:15548997,Grey:9807270,Navy:3426654,DarkAqua:1146986,DarkGreen:2067276,DarkBlue:2123412,DarkPurple:7419530,DarkVividPink:11342935,DarkGold:12745742,DarkOrange:11027200,DarkRed:10038562,DarkGrey:9936031,DarkerGrey:8359053,LightGrey:12370112,DarkNavy:2899536,Blurple:5793266,Greyple:10070709,DarkButNotBlack:2895667,NotQuiteBlack:2303786};class U{constructor(){throw new Error(`The ${this.constructor.name} class may not be instantiated.`)}static resolveColor(a){if(typeof a=="string"){if(a==="Random")return Math.floor(Math.random()*(16777215+1));if(a==="Default")return 0;if(/^#?[\da-f]{6}$/i.test(a))return parseInt(a.replace("#",""),16);a=T[a]}else Array.isArray(a)&&(a=(a[0]<<16)+(a[1]<<8)+a[2]);return a<0||a>16777215?(console.log("Color out of range:",a),null):typeof a!="number"||Number.isNaN(a)?(console.log("Color is NaN:",a),null):a}static discordSort(a){return a.sort((n,i)=>n.rawPosition-i.rawPosition||parseInt(i.id.slice(0,-10))-parseInt(n.id.slice(0,-10))||parseInt(i.id.slice(10))-parseInt(n.id.slice(10)))}static timestampFrom(a){}}let P=new Map,G={},M=S(!1),O=new Map,C=new Map,k=new Map,I=!1;async function q(e){if(C.has(e))return C.get(e);if(k.has(e))return k.get(e).promise;let a={},n=new Promise((i,s)=>{a.resolve=i,a.reject=s});return a.promise=n,k.set(e,a),N(),n}async function N(e=!1){if(!e&&I)return;if(I=!0,k.size===0)return I=!1;let[a]=k.keys(),n=a.split("-")[0],i=a.split("-")[1],s=k.get(a),l=await fetch(`/api/v2/guilds/${n}/members/${i}`);if(l.status!==429){let r=await l.json();l.status===200?(C.set(a,r),s.resolve(r)):s.reject(r),k.delete(a)}setTimeout(()=>N(!0),1e3)}async function Q(e){let a=O.get(e);if(a)return a;let n=await fetch(`/api/v1/discord/invites/guild-${e}`);if(n.status===200){let i=await n.json();return O.set(e,i),i}return null}function V(e,a){if(!e||!a)return!1;let n=e.substring(1),i=n.split("&");for(let s=0;s<i.length;s++){let l=i[s].split("=");if(l[0]==a)return l[1]}return!1}function z(e,a){const n=setInterval(e,a);onDestroy(()=>{clearInterval(n)})}function F(e){const a=n=>{var i,s;e&&!e.contains(n.target)&&!n.defaultPrevented&&!((s=n.path||((i=n.composedPath)==null?void 0:i.call(n)))!=null&&s.find(l=>{var r;return(r=l.localName)==null?void 0:r.includes("grammarly")}))&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",a,!0),{destroy(){document.removeEventListener("click",a,!0)}}}function X(e){return new Promise(a=>{setTimeout(()=>{a()},e)})}function J(e,a=null){return L(e,{language:"en",round:!0,conjunction:" and ",serialComma:!1,...a?{units:a}:{}})}function K(e,a={},n=""){return e=e.replace(/`(.+)`/gm,(i,s)=>a.code?a.code(i,s):`<span class="md-code${n}">${s}</span>`),e=e.replace(/>>>\s(.+)/gm,(i,s)=>a.quote?a.quote(s):`<span class="md-quote${n}">${s}</span>`),e=e.replace(/>\s(.+)\n/gm,(i,s)=>a.quote?a.quote(i,s):`<span class="md-quote${n}">${s}</span>`),e=e.replace(/\*\*(.+)\*\*/gm,(i,s)=>a.strong?a.strong(i,s):`<span class="md-bold${n}">${s}</span>`),e=e.replace(/\*(.+)\*/gm,(i,s)=>a.italic?a.italic(i,s):`<span class="md-italic${n}">${s}</span>`),e=e.replace(/__(.+[])__/gm,(i,s)=>a.underline?a.underline(i,s):`<span class="md-underline${n}">${s}</span>`),e=e.replace(/_(.+)_/gm,(i,s)=>a.italic?a.italic(i,s):`<span class="md-italic${n}">${s}</span>`),e}function E(e,a){var s,l,r,c,f,p;let n=[];if(!e)return"";if((s=e.author)!=null&&s.name&&n.push(e.author.name),(l=e.author)!=null&&l.icon_url&&n.push(e.author.icon_url),(r=e.author)!=null&&r.url&&n.push(e.author.url),e.title&&n.push(`${a?"**":""}${e.title}${a?"**":""}`),e.url&&n.push(e.url),e.description&&n.push(e.description),((c=e.fields)==null?void 0:c.length)>0)for(var i=0;i<e.fields.length;i++)n.push(e.fields[i].name,e.fields[i].value);return(f=e.footer)!=null&&f.text&&n.push(e.footer.text),(p=e.footer)!=null&&p.icon_url&&n.push(e.footer.icon_url),e.image&&n.push(e.image.url),e.thumbnail&&n.push(e.thumbnail.url),e.video&&n.push(e.video.url),e.timestamp&&n.push(e.timestamp),n.join(`
`)}function B(e,a){return!e||e.length===0?"":e.map(n=>E(n,a)).join(`
`)}function Y(e){var n;let a="";return e!=null&&e.content&&(a+=": "+(e==null?void 0:e.content)),((n=e==null?void 0:e.embeds)==null?void 0:n.length)>0&&(a+=`
`+B(e.embeds)),a}function Z(e){let a=document.createElement("textarea");a.innerHTML=e,document.body.appendChild(a),a.select();let n=document.execCommand("copy");return document.body.removeChild(a),n}function W(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}async function H(e){var l,r,c,f,p,t,v;const a=(await R(()=>import("./emojis-a3cfcd4f.js"),[])).default;let n={};if((e==null?void 0:e.length)>0)for(let o=0;o<e.length;o++)!((l=e[o])!=null&&l.id)||(n[`id-${e[o].id}`]={names:[e[o].name],src:`https://cdn.discordapp.com/emojis/${(r=e[o])==null?void 0:r.id}.${(c=e[o])!=null&&c.animated?"gif":"png"}`,animated:!!((f=e[o])!=null&&f.animated)});let i=Object.keys(a);for(let o=0;o<i.length;o++){let u=i[o],m=a[u],b=Object.keys(m);for(let h=0;h<b.length;h++){let x=b[h],y=m[x],w={names:y.names,src:`/api/v2/emoji/${y.asset}`},g=!!w.names.find(d=>d.includes("regional_indicator")||d.includes("flag_"));n[y.emoji]={...w,sureNoTone:g,tone:!g&&w.names.find(d=>d.includes("_tone"))?parseInt(((v=(t=(p=w.names.find(d=>d.includes("_tone")))==null?void 0:p.split)==null?void 0:t.call(p,"_tone"))==null?void 0:v[1])||0):void 0}}}let s=Object.values(n).map(o=>o.names).flat();for(let o in n){let u=n[o];u.sureNoTone||u.tone||s.find(m=>m.startsWith(`${u.names[0]}_tone`))&&(n[o]={...u,tone:0})}return n}function ee(e,a){var n;return(e==null?void 0:e.length)>=17?`https://cdn.discordapp.com/emojis/${e}.${(n=a.find(i=>i.id===e))!=null&&n.animated?"gif":"png"}`:P.has(e)?P.get(e):new Promise(async i=>{const s=(await R(()=>import("./emoji_assets-c98fe4f9.js"),[])).default;return P.set(e,`/api/v2/emoji/${s[e]}`),i(P.get(e))})}function ae(e,a=[],n=[],i=!1){const{toHTML:s}=j;return e=s(e,{discordCallback:{user({id:l}){return'<span class="d-mention-user">@Some User</span>'},channel({id:l}){var r;return`<span class="d-mention-user">#${((r=n.find(c=>c.id===l))==null?void 0:r.name)||"channel"}</span>`},role({id:l}){var f,p,t,v;let r=a.find(o=>o.id===l)||{},c=`#${r.color&&((v=(t=(p=(f=U.resolveColor(Number.isInteger(parseInt(r.color))?parseInt(r.color):r.color))==null?void 0:f.toString)==null?void 0:p.call(f,16))==null?void 0:t.padStart)==null?void 0:v.call(t,6,"0"))||"5865F2"}`;return`<span class="d-mention-role" style="--clr-role: ${c}; --clr-role-24: ${c}24; --clr-role-56: ${c}56">@${r.name||"Some Role"}</span>`},everyone(){return'<span class="d-mention-everyone">@everyone</span>'},here(){return'<span class="d-mention-everyone">@here</span>'}},embed:i}),e=e.replace(/<a href=".*?\$\{(\w+)\}.*?">/g,(l,r)=>l.replace(`\${${r}}`,r)),e=e.replace(/\$\{(\S[^}]+)\}/g,(l,r)=>`<span class="md-variable-wrap">\${</span><span class="md-variable">${r}</span><span class="md-variable-wrap">}</span>`),e=e.replace(/\$e\[(.[^\]]+)\]/g,(l,r)=>`<span class="md-escapemarkdown-wrap">[</span>${r}<span class="md-escapemarkdown-wrap">]</span>`),e}function te(e){var a=null;if(window.DOMParser)try{a=new DOMParser().parseFromString(e,"text/xml")}catch{a=null}else if(window.ActiveXObject)try{a=new ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(e)||window.alert(a.parseError.reason+a.parseError.srcText)}catch{a=null}else alert("cannot parse xml string!");return a}function ne(e,a=!1){return new Promise(async(n,i)=>{if(a)return n();let l=(await R(()=>import("./browser-7856f9dd.js").then(t=>t.b),[])).createCanvas(...e.dimensions),r=l.getContext("2d"),c=e.layers.length-1;f();async function f(){let t=e.layers[c];switch(r.save(),r.globalAlpha=t.opacity/100,t.type){case"color":if(r.fillStyle=t.value,t.borderRadius){r.beginPath();try{r.roundRect(...t.position,...t.dimensions,[t.borderRadius>t.dimensions[0]/2?t.dimensions[0]/2:t.borderRadius])}catch{M.set(!0),r.fillRect(...t.position,...t.dimensions)}r.closePath(),r.fill()}else r.fillRect(...t.position,...t.dimensions);break;case"image":var v=await p(t.value==="${useravatarurl}"?"https://cdn.discordapp.com/embed/avatars/0.png":t.value);if(t.borderRadius){r.beginPath();try{r.roundRect(...t.position,...t.dimensions,[t.borderRadius>t.dimensions[0]/2?t.dimensions[0]/2:t.borderRadius]),r.closePath(),r.clip()}catch{M.set(!0),r.closePath()}}r.drawImage(v,...t.position,...t.dimensions);break;case"text":r.fillStyle=t.value.color,r.font=`${t.value.bold?" bold ":""}${t.value.italic?" italic ":""}${t.value.size}px Onest`,r.textAlign=t.value.alignh,r.textBaseline=t.value.alignv==="center"?"middle":t.value.alignv;var o=t.value.text.split(" "),u=o.shift(),m=[];if(o.length)for(;o.length;)r.measureText(`${u} ${o[0]}`).width<=t.dimensions[0]?u+=" "+o.shift():(m.push(u),u=o.shift()),!o.length&&u&&m.push(u);else m.push(u);r.textBaseline="top";var b=r.measureText(m[0]),h=t.value.size*1.03,x=m.length*(b.actualBoundingBoxDescent+h),y=x/2+(t.dimensions[1]-x)/2+t.position[1];r.textBaseline=t.value.alignv==="center"?"middle":t.value.alignv,m.forEach((w,g)=>{let d;switch(t.value.alignv){case"top":d=t.position[1]+g*h;break;case"center":var $=m.length/2;m.length%2?d=y-h*($+.38)+(g+1)*h:g+1<$?d=y-h/2-($-(g+1))*(h*.925):g+1===$?d=y-h/2:g===$?d=y+h/2:g+3>$&&(d=y+h/2+(g-$)*h);break;case"bottom":d=t.position[1]+t.dimensions[1]+(g+1-m.length)*h;break}if(r.fillText(w,t.value.alignh==="left"?t.position[0]:t.value.alignh==="center"?t.position[0]+t.dimensions[0]/2:t.position[0]+t.dimensions[0],d),t.value.underlined){r.save(),r.lineWidth=2,r.strokeStyle=t.value.color;let D=r.measureText(w),A;switch(t.value.alignh){case"left":A=t.position[0];break;case"center":A=t.position[0]+(t.dimensions[0]-D.width)/2;break;case"right":A=t.position[0]+t.dimensions[0]-D.width;break}let _;switch(t.value.alignv){case"top":_=d+h;break;case"center":_=d+h/2;break;case"bottom":_=d;break}r.beginPath(),r.moveTo(A,_),r.lineTo(A+D.width,_),r.stroke()}});break}r.restore(),c--,c>=0?f():n(l.toDataURL())}function p(t){return new Promise((v,o)=>{let u=new Image;u.crossOrigin="Anonymous";function m(){u.onload=null,u.onerror=null}u.onload=()=>{m(),v(u)},u.onerror=b=>{m(),o(b)},u.src=t,(u.complete||u.complete===void 0)&&(u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",u.src=t)})}})}function re(e){return a(e);function a(s){var l=6,r=n(s,22),c=i(r,l);return c}function n(s,l){for(var r=10,c="",f=0,p=0;p<(s==null?void 0:s.length);p++){var t=parseInt(s[p]),v=f*r+t,o=Math.floor(v/Math.pow(2,l));f=v%Math.pow(2,l),c+=o.toString()}return c}function i(s,l){for(var r=10,c=0,f=0;f<s.length;f++){var p=parseInt(s[f]);c=(c*r+p)%l}return c}}let se={};const ue=Object.freeze(Object.defineProperty({__proto__:null,temp:G,isFirefox:M,guildCache:O,getMemberUser:q,getGuildById:Q,getQueryVariable:V,onInterval:z,clickOutside:F,wait:X,humanizeDuration:J,marked:K,getEmbedAsString:E,getEmbedsAsString:B,getMessageContent:Y,copy:Z,escapeHTML:W,getEmojis:H,fetchEmojiSrc:ee,discordMessageMarkdown:ae,parseXml:te,renderWMDynamicImage:ne,getDefaultAvatarIndex:re,otherPermissionTypes:se},Symbol.toStringTag,{value:"Module"}));export{U,H as a,O as b,F as c,Z as d,ae as e,W as f,re as g,Q as h,ee as i,ue as j,q as k,J as l,M as m,ne as r,G as t,X as w};
