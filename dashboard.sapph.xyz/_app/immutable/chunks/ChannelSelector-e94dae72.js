import{S as ne,i as te,s as se,a0 as ae,a1 as ie,x as oe,a as S,l as k,y as re,c as E,m as w,n as D,h as g,p as v,z as ce,b as C,a2 as he,f as fe,t as ue,C as de,W as X,an as _e,e as Y,H as b,r as V,a6 as pe,u as N,a7 as me,v as q,F as ve,K as j,I as U,Y as $,Z as ge,_ as be,q as F}from"./index-82df6c7a.js";import{S as ke}from"./SearchBar-79b8b9ef.js";function Z(n,e,t){const o=n.slice();return o[17]=e[t],o[19]=t,o}function A(n,e,t){const o=n.slice();return o[20]=e[t],o}function J(n){let e;function t(r,h){return r[4]?ye:we}let o=t(n),a=o(n);return{c(){a.c(),e=Y()},l(r){a.l(r),e=Y()},m(r,h){a.m(r,h),C(r,e,h)},p(r,h){o===(o=t(r))&&a?a.p(r,h):(a.d(1),a=o(r),a&&(a.c(),a.m(e.parentNode,e)))},d(r){a.d(r),r&&g(e)}}}function we(n){let e,t=n[2]&&n[3].length>=60&&n[3].length<=200&&n[3].startsWith("https://")&&n[3].includes("/webhooks/")?"Webhook not found":"No channel found",o,a,r,h,l,f=n[2]?"<br>or a URL to search for a webhook":"",s;return{c(){e=k("div"),o=V(t),a=V(`.
    `),r=k("br"),h=V(`
    Enter an ID to search for a channel `),l=new pe(!1),s=S(),this.h()},l(c){e=w(c,"DIV",{class:!0});var i=D(e);o=N(i,t),a=N(i,`.
    `),r=w(i,"BR",{}),h=N(i,`
    Enter an ID to search for a channel `),l=me(i,!1),s=E(i),i.forEach(g),this.h()},h(){l.a=s,v(e,"class","not-found svelte-1pin7po")},m(c,i){C(c,e,i),b(e,o),b(e,a),b(e,r),b(e,h),l.m(f,e),b(e,s)},p(c,i){i&12&&t!==(t=c[2]&&c[3].length>=60&&c[3].length<=200&&c[3].startsWith("https://")&&c[3].includes("/webhooks/")?"Webhook not found":"No channel found")&&q(o,t),i&4&&f!==(f=c[2]?"<br>or a URL to search for a webhook":"")&&l.p(f)},d(c){c&&g(e)}}}function ye(n){let e,t;return{c(){e=k("div"),t=V("Searching ..."),this.h()},l(o){e=w(o,"DIV",{class:!0});var a=D(e);t=N(a,"Searching ..."),a.forEach(g),this.h()},h(){v(e,"class","not-found svelte-1pin7po")},m(o,a){C(o,e,a),b(e,t)},p:ve,d(o){o&&g(e)}}}function O(n){let e,t,o,a,r,h=n[17].name+"",l,f,s,c;function i(){return n[9](n[17])}function p(){return n[10](n[17])}return{c(){e=k("div"),t=k("img"),a=S(),r=k("div"),l=V(h),this.h()},l(_){e=w(_,"DIV",{class:!0,style:!0});var u=D(e);t=w(u,"IMG",{src:!0,alt:!0,class:!0}),a=E(u),r=w(u,"DIV",{class:!0});var m=D(r);l=N(m,h),m.forEach(g),u.forEach(g),this.h()},h(){j(t.src,o="/assets/icons/rounded/greater-than.svg")||v(t,"src",o),v(t,"alt","arrow"),v(t,"class","arrow svelte-1pin7po"),v(r,"class","name svelte-1pin7po"),v(e,"class",f="category "+(n[1]?"selectable":"")+" svelte-1pin7po"),v(e,"style",n[19]?"margin-top: 10px;":"")},m(_,u){C(_,e,u),b(e,t),b(e,a),b(e,r),b(r,l),s||(c=[U(e,"click",i),U(e,"keypress",p)],s=!0)},p(_,u){n=_,u&9&&h!==(h=n[17].name+"")&&q(l,h),u&2&&f!==(f="category "+(n[1]?"selectable":"")+" svelte-1pin7po")&&v(e,"class",f)},d(_){_&&g(e),s=!1,$(c)}}}function P(n){let e,t,o,a,r,h,l,f=n[20].name+"",s,c,i;function p(){return n[12](n[20])}function _(){return n[13](n[20])}return{c(){e=k("div"),t=k("img"),a=S(),r=ge("svg"),h=S(),l=k("div"),s=V(f),this.h()},l(u){e=w(u,"DIV",{class:!0});var m=D(e);t=w(m,"IMG",{src:!0,alt:!0,class:!0,onload:!0,style:!0}),a=E(m),r=be(m,"svg",{class:!0,style:!0}),D(r).forEach(g),h=E(m),l=w(m,"DIV",{class:!0});var R=D(l);s=N(R,f),R.forEach(g),m.forEach(g),this.h()},h(){j(t.src,o="/assets/icons/discord/"+(n[20].type===2?"voice-channel":n[20].type===5?"announcement-channel":n[20].type===10||n[20].type===11||n[20].type===12?"thread-channel":n[20].type===13?"stage-channel":"channel")+".svg")||v(t,"src",o),v(t,"alt","channel icon"),v(t,"class","icon"),v(t,"onload","SVGInject(this)"),F(t,"min-width","20px"),F(t,"max-width","20px"),F(t,"opacity",".5"),v(r,"class","icon svelte-1pin7po"),F(r,"display","none"),v(l,"class","name svelte-1pin7po"),v(e,"class","channel svelte-1pin7po")},m(u,m){C(u,e,m),b(e,t),b(e,a),b(e,r),b(e,h),b(e,l),b(l,s),c||(i=[U(e,"click",p),U(e,"keypress",_)],c=!0)},p(u,m){n=u,m&9&&!j(t.src,o="/assets/icons/discord/"+(n[20].type===2?"voice-channel":n[20].type===5?"announcement-channel":n[20].type===10||n[20].type===11||n[20].type===12?"thread-channel":n[20].type===13?"stage-channel":"channel")+".svg")&&v(t,"src",o),m&9&&f!==(f=n[20].name+"")&&q(s,f)},d(u){u&&g(e),c=!1,$(i)}}}function Q(n){let e,t,o,a=n[17].id&&O(n),r=n[17].children.filter(n[11]),h=[];for(let l=0;l<r.length;l+=1)h[l]=P(A(n,r,l));return{c(){a&&a.c(),e=S(),t=k("div");for(let l=0;l<h.length;l+=1)h[l].c();o=S(),this.h()},l(l){a&&a.l(l),e=E(l),t=w(l,"DIV",{class:!0});var f=D(t);for(let s=0;s<h.length;s+=1)h[s].l(f);o=E(f),f.forEach(g),this.h()},h(){v(t,"class","channels")},m(l,f){a&&a.m(l,f),C(l,e,f),C(l,t,f);for(let s=0;s<h.length;s+=1)h[s]&&h[s].m(t,null);b(t,o)},p(l,f){if(l[17].id?a?a.p(l,f):(a=O(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),f&105){r=l[17].children.filter(l[11]);let s;for(s=0;s<r.length;s+=1){const c=A(l,r,s);h[s]?h[s].p(c,f):(h[s]=P(c),h[s].c(),h[s].m(t,o))}for(;s<h.length;s+=1)h[s].d(1);h.length=r.length}},d(l){a&&a.d(l),l&&g(e),l&&g(t),X(h,l)}}}function Ie(n){let e,t,o,a,r;function h(i){n[7](i)}let l={placeholder:n[2]?"Channel name/ID or webhook URL":"Channel name or ID",dark:!0,shadow:!1,disabled:n[4],loading:n[4]};n[3]!==void 0&&(l.value=n[3]),e=new ke({props:l}),ae.push(()=>ie(e,"value",h));let f=n[0].filter(n[8]),s=[];for(let i=0;i<f.length;i+=1)s[i]=Q(Z(n,f,i));let c=null;return f.length||(c=J(n)),{c(){oe(e.$$.fragment),o=S(),a=k("div");for(let i=0;i<s.length;i+=1)s[i].c();c&&c.c(),this.h()},l(i){re(e.$$.fragment,i),o=E(i),a=w(i,"DIV",{class:!0});var p=D(a);for(let _=0;_<s.length;_+=1)s[_].l(p);c&&c.l(p),p.forEach(g),this.h()},h(){v(a,"class","categories svelte-1pin7po")},m(i,p){ce(e,i,p),C(i,o,p),C(i,a,p);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(a,null);c&&c.m(a,null),r=!0},p(i,[p]){const _={};if(p&4&&(_.placeholder=i[2]?"Channel name/ID or webhook URL":"Channel name or ID"),p&16&&(_.disabled=i[4]),p&16&&(_.loading=i[4]),!t&&p&8&&(t=!0,_.value=i[3],he(()=>t=!1)),e.$set(_),p&127){f=i[0].filter(i[8]);let u;for(u=0;u<f.length;u+=1){const m=Z(i,f,u);s[u]?s[u].p(m,p):(s[u]=Q(m),s[u].c(),s[u].m(a,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=f.length,!f.length&&c?c.p(i,p):f.length?c&&(c.d(1),c=null):(c=J(i),c.c(),c.m(a,null))}},i(i){r||(fe(e.$$.fragment,i),r=!0)},o(i){ue(e.$$.fragment,i),r=!1},d(i){de(e,i),i&&g(o),i&&g(a),X(s,i),c&&c.d()}}}function De(n,e,t){let{channels:o=[],catgoriesSelectable:a=!1,allowWebhook:r=!1}=e,h=_e(),l="",f=d=>d.id===l||d.name.replace(/\s/,"").toLowerCase().includes(l.replace(/\s/,"").toLowerCase()),s=!1;function c(d){d.type===4&&!a||h("select",d)}async function i(){if(s)return;if(t(4,s=!0),o.find(y=>{var I,L;return y.id===l||((L=(I=y.children)==null?void 0:I.find)==null?void 0:L.call(I,W=>(W==null?void 0:W.id)===l))}))return t(4,s=!1);let d=await fetch(`/api/v2/guilds/${o[1].guild_id}/channels/${l}`);if(d.status===200){let y=await d.json();y.parent_id=null,o.find(I=>!I.id).children.unshift(y)}t(4,s=!1)}async function p(){var L,W,G,H,B,M,T,z;if(s||!r)return;t(4,s=!0);let d=(G=(W=(L=l.split("/api/webhooks/"))==null?void 0:L[1])==null?void 0:W.split("/"))==null?void 0:G[0],y=(z=(T=(M=(B=(H=l.split(`/api/webhooks/${d}/`))==null?void 0:H[1])==null?void 0:B.split("/"))==null?void 0:M[0])==null?void 0:T.split("?"))==null?void 0:z[0],I=await fetch(`/api/v2/guilds/${o[1].guild_id}/webhook?webhook_id=${d}&webhook_token=${y}`);if(I.status===200){let K=await I.json();K.isWebhook=!0,c(K)}t(4,s=!1)}function _(d){l=d,t(3,l)}const u=d=>d.children.find(y=>!l||f(y)),m=d=>c(d),R=d=>c(d),x=d=>!l||f(d),ee=d=>c(d),le=d=>c(d);return n.$$set=d=>{"channels"in d&&t(0,o=d.channels),"catgoriesSelectable"in d&&t(1,a=d.catgoriesSelectable),"allowWebhook"in d&&t(2,r=d.allowWebhook)},n.$$.update=()=>{n.$$.dirty&8&&l.length>=17&&l.length<=20&&!Number.isNaN(parseInt(l))&&i(),n.$$.dirty&8&&l.length>=60&&l.length<=200&&l.startsWith("https://")&&l.includes("/webhooks/")&&p()},[o,a,r,l,s,f,c,_,u,m,R,x,ee,le]}class Ee extends ne{constructor(e){super(),te(this,e,De,Ie,se,{channels:0,catgoriesSelectable:1,allowWebhook:2})}}export{Ee as C};
