import{w as t}from"./index-2eba6212.js";import{l}from"./index-f33f2a57.js";let s=new Map,c=t({connecting:!0,connected:!1,error:null}),o=l("wss://user-ws.sapph.xyz/dashboard",{withCredentials:!0,rememberUpgrade:!0,autoConnect:!0,reconnection:!1}),g=t(null,e=>(o.on("admin-clusterdata",n=>{e(n)}),()=>{o.removeAllListeners("admin-clusterdata")}));o.on("connect",()=>{console.log("[WS]","Connected"),c.set({connecting:!1,connected:!0,error:null});for(let e of s.keys())console.log("[WS]","Requesting",e),o.emit(e)});o.on("disconnect",()=>{o.disconnect(),console.log("[WS]","Disconnected"),c.set({connecting:!0,connected:!1,error:null});for(let e of s.keys())s.get(e).set(null);setTimeout(()=>o.connect(),1e3)});o.on("connect_error",e=>{if(console.log("[WS]","Connect error",e.message,o),e.message==="Unauthorized")return c.set({connecting:!1,connected:!1,error:e.message});c.set({connecting:!0,connected:!1,error:e.message}),setTimeout(()=>o.connect(),1e3)});o.onAny((e,...n)=>{if(console.log("[WS]","Received",e),!s.has(e))return s.set(e,t(((n==null?void 0:n.length)||0)>1?n:n==null?void 0:n[0]));s.get(e).set(((n==null?void 0:n.length)||0)>1?n:n==null?void 0:n[0])});function f(e,{force:n=!1}={}){let r=!1;return s.has(e)||(s.set(e,t(null)),r=!0),(n||r)&&(console.log("[WS]","Sending",e),o.emit(e)),s.get(e)}export{g as a,c,f as g,o as s};
