import{_ as ar}from"./preload-helper-995db135.js";function $(r,i){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),o.push.apply(o,c)}return o}function B(r){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?$(Object(o),!0).forEach(function(c){lr(r,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(o,c))})}return r}function H(){H=function(){return i};var r,i={},o=Object.prototype,c=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},p=typeof Symbol=="function"?Symbol:{},u=p.iterator||"@@iterator",y=p.asyncIterator||"@@asyncIterator",m=p.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch{h=function(t,n,l){return t[n]=l}}function q(e,t,n,l){var a=t&&t.prototype instanceof U?t:U,f=Object.create(a.prototype),d=new C(l||[]);return s(f,"_invoke",{value:ir(e,n,d)}),f}function S(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(l){return{type:"throw",arg:l}}}i.wrap=q;var N="suspendedStart",nr="suspendedYield",M="executing",L="completed",w={};function U(){}function x(){}function b(){}var R={};h(R,u,function(){return this});var k=Object.getPrototypeOf,j=k&&k(k(K([])));j&&j!==o&&c.call(j,u)&&(R=j);var O=b.prototype=U.prototype=Object.create(R);function W(e){["next","throw","return"].forEach(function(t){h(e,t,function(n){return this._invoke(t,n)})})}function D(e,t){function n(a,f,d,g){var v=S(e[a],e,f);if(v.type!=="throw"){var E=v.arg,P=E.value;return P&&typeof P=="object"&&c.call(P,"__await")?t.resolve(P.__await).then(function(_){n("next",_,d,g)},function(_){n("throw",_,d,g)}):t.resolve(P).then(function(_){E.value=_,d(E)},function(_){return n("throw",_,d,g)})}g(v.arg)}var l;s(this,"_invoke",{value:function(a,f){function d(){return new t(function(g,v){n(a,f,g,v)})}return l=l?l.then(d,d):d()}})}function ir(e,t,n){var l=N;return function(a,f){if(l===M)throw new Error("Generator is already running");if(l===L){if(a==="throw")throw f;return{value:r,done:!0}}for(n.method=a,n.arg=f;;){var d=n.delegate;if(d){var g=V(d,n);if(g){if(g===w)continue;return g}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(l===N)throw l=L,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);l=M;var v=S(e,t,n);if(v.type==="normal"){if(l=n.done?L:nr,v.arg===w)continue;return{value:v.arg,done:n.done}}v.type==="throw"&&(l=L,n.method="throw",n.arg=v.arg)}}}function V(e,t){var n=t.method,l=e.iterator[n];if(l===r)return t.delegate=null,n==="throw"&&e.iterator.return&&(t.method="return",t.arg=r,V(e,t),t.method==="throw")||n!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=S(l,e.iterator,t.arg);if(a.type==="throw")return t.method="throw",t.arg=a.arg,t.delegate=null,w;var f=a.arg;return f?f.done?(t[e.resultName]=f.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=r),t.delegate=null,w):f:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function or(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(or,this),this.reset(!0)}function K(e){if(e||e===""){var t=e[u];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,l=function a(){for(;++n<e.length;)if(c.call(e,n))return a.value=e[n],a.done=!1,a;return a.value=r,a.done=!0,a};return l.next=l}}throw new TypeError(typeof e+" is not iterable")}return x.prototype=b,s(O,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:x,configurable:!0}),x.displayName=h(b,m,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===x||(t.displayName||t.name)==="GeneratorFunction")},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,m,"GeneratorFunction")),e.prototype=Object.create(O),e},i.awrap=function(e){return{__await:e}},W(D.prototype),h(D.prototype,y,function(){return this}),i.AsyncIterator=D,i.async=function(e,t,n,l,a){a===void 0&&(a=Promise);var f=new D(q(e,t,n,l),a);return i.isGeneratorFunction(t)?f:f.next().then(function(d){return d.done?d.value:f.next()})},W(O),h(O,m,"Generator"),h(O,u,function(){return this}),h(O,"toString",function(){return"[object Generator]"}),i.keys=function(e){var t=Object(e),n=[];for(var l in t)n.push(l);return n.reverse(),function a(){for(;n.length;){var f=n.pop();if(f in t)return a.value=f,a.done=!1,a}return a.done=!0,a}},i.values=K,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(z),!e)for(var t in this)t.charAt(0)==="t"&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(v,E){return f.type="throw",f.arg=e,t.next=v,E&&(t.method="next",t.arg=r),!!E}for(var l=this.tryEntries.length-1;l>=0;--l){var a=this.tryEntries[l],f=a.completion;if(a.tryLoc==="root")return n("end");if(a.tryLoc<=this.prev){var d=c.call(a,"catchLoc"),g=c.call(a,"finallyLoc");if(d&&g){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&c.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var a=l;break}}a&&(e==="break"||e==="continue")&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var f=a?a.completion:{};return f.type=e,f.arg=t,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(f)},complete:function(e,t){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),z(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var l=n.completion;if(l.type==="throw"){var a=l.arg;z(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:K(e),resultName:t,nextLoc:n},this.method==="next"&&(this.arg=r),w}},i}function J(r,i,o,c,s,p,u){try{var y=r[p](u),m=y.value}catch(h){o(h);return}y.done?i(m):Promise.resolve(m).then(c,s)}function cr(r){return function(){var i=this,o=arguments;return new Promise(function(c,s){var p=r.apply(i,o);function u(m){J(p,c,s,u,y,"next",m)}function y(m){J(p,c,s,u,y,"throw",m)}u(void 0)})}}function lr(r,i,o){return i=pr(i),i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}function ur(r,i){if(r==null)return{};var o={},c=Object.keys(r),s,p;for(p=0;p<c.length;p++)s=c[p],!(i.indexOf(s)>=0)&&(o[s]=r[s]);return o}function sr(r,i){if(r==null)return{};var o=ur(r,i),c,s;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);for(s=0;s<p.length;s++)c=p[s],!(i.indexOf(c)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,c)||(o[c]=r[c]))}return o}function fr(r,i){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var c=o.call(r,i||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function pr(r){var i=fr(r,"string");return typeof i=="symbol"?i:String(i)}var er="https://cdn.paddle.com/paddle/v2/paddle.js";function dr(){return document.querySelector('script[src="'.concat(er,'"]'))||void 0}function yr(r){var i=document.createElement("script");i.src=r;var o=document.head||document.body;if(!o)throw new Error("Cannot inject Paddle.js. It needs a <head> or <body> element.");return o.appendChild(i),i}var A;function hr(){return A!==void 0||(A=new Promise(function(r,i){if(typeof window>"u"){r(void 0);return}if(window.Paddle){r(window.Paddle);return}try{var o=dr();o||(o=yr(er)),o.addEventListener("load",function(){window.Paddle?r(window.Paddle):i(new Error("Paddle.js not available"))}),o.addEventListener("error",function(){i(new Error("Failed to load Paddle.js"))})}catch(c){i(c);return}})),A}var X;(function(r){r.CHECKOUT_LOADED="checkout.loaded",r.CHECKOUT_CLOSED="checkout.closed",r.CHECKOUT_UPDATED="checkout.updated",r.CHECKOUT_COMPLETED="checkout.completed",r.CHECKOUT_ERROR="checkout.error",r.CHECKOUT_FAILED="checkout.failed",r.CHECKOUT_ITEMS_UPDATED="checkout.items.updated",r.CHECKOUT_ITEMS_REMOVED="checkout.items.removed",r.CHECKOUT_CUSTOMER_CREATED="checkout.customer.created",r.CHECKOUT_CUSTOMER_UPDATED="checkout.customer.updated",r.CHECKOUT_CUSTOMER_REMOVED="checkout.customer.removed",r.CHECKOUT_PAYMENT_SELECTED="checkout.payment.selected",r.CHECKOUT_PAYMENT_INITIATED="checkout.payment.initiated",r.CHECKOUT_PAYMENT_FAILED="checkout.payment.failed",r.CHECKOUT_DISCOUNT_APPLIED="checkout.discount.applied",r.CHECKOUT_DISCOUNT_REMOVED="checkout.discount.removed"})(X||(X={}));var Q;(function(r){r.DAY="day",r.WEEK="week",r.MONTH="month",r.YEAR="year"})(Q||(Q={}));var Z;(function(r){r.ALIPAY="alipay",r.APPLE_PAY="apple-pay",r.CARD="card",r.GOOGLE_PAY="google-pay",r.IDEAL="ideal",r.PAYPAL="paypal",r.WIRE_TRANSFER="wire-transfer",r.NONE="none"})(Z||(Z={}));var rr;(function(r){r.AMERICAN_EXPRESS="american_express",r.DINERS_CLUB="diners_club",r.DISCOVER="discover",r.JCB="jcb",r.MADA="mada",r.MAESTRO="maestro",r.MASTER_CARD="mastercard",r.UNION_PAY="union_pay",r.VISA="visa",r.UNKNOWN="unknown"})(rr||(rr={}));var tr;(function(r){r.DRAFT="draft",r.READY="ready",r.COMPLETED="completed",r.BILLED="billed",r.canceled="canceled",r.PAST_DUE="past_due"})(tr||(tr={}));var mr=["environment"];function gr(r){return G.apply(this,arguments)}function G(){return G=cr(H().mark(function r(i){var o,c,s;return H().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,hr();case 2:if(o=u.sent,!o){u.next=8;break}if(i){c=i.environment,s=sr(i,mr);try{c&&o.Environment.set(c),o.Initialized?o.Update(B({},s)):o.Initialize(B({},s))}catch(y){console.warn("Paddle Initialization failed. Please check the inputs",y)}}return u.abrupt("return",o);case 8:return console.warn("Error Loading Paddle"),u.abrupt("return");case 10:case"end":return u.stop()}},r)})),G.apply(this,arguments)}const vr={sandbox:{items:[{type:"custom-branding",priceId:"pri_01hrsa52gp81gfrk3dr71esqks",cycle:"monthly",plan:"mini"},{type:"custom-branding",priceId:"pri_01hrsa5xbe7ppvbt21q59n3a70",cycle:"yearly",plan:"mini"},{type:"custom-branding",priceId:"pri_01hrvqryrkq18ccfjfaa7m22vd",cycle:"monthly",plan:"small"},{type:"custom-branding",priceId:"pri_01hrvqsv4vdbr6rdskek2w0npn",cycle:"yearly",plan:"small"},{type:"custom-branding",priceId:"pri_01hrvsm9y8xghmh9e1h8f9r4jh",cycle:"monthly",plan:"medium"},{type:"custom-branding",priceId:"pri_01hrvsn7xee9w3040kd0nf6s8z",cycle:"yearly",plan:"medium"},{type:"custom-branding",priceId:"pri_01hrvstrbrjky3pf4ddgnv48kv",cycle:"monthly",plan:"large"},{type:"custom-branding",priceId:"pri_01hrvsvcy4398w1zkzkr749bxz",cycle:"yearly",plan:"large"},{type:"limit-increase",priceId:"pri_01hrsa98r3k2j9v2th730ab5hy",cycle:"monthly"},{type:"limit-increase",priceId:"pri_01hrsaabvedx92zcvndmkbw76y",cycle:"yearly"}]},production:{items:[{type:"custom-branding",priceId:"pri_01hrs7zftr70e3ffnkchgjzazr",cycle:"monthly",plan:"mini"},{type:"custom-branding",priceId:"pri_01hrs868z2a88wmscnrz16ck92",cycle:"yearly",plan:"mini"},{type:"custom-branding",priceId:"pri_01hrs81n8v3vw7e4h3b7yj4dt2",cycle:"monthly",plan:"small"},{type:"custom-branding",priceId:"pri_01hrs878kr66w1913983cargca",cycle:"yearly",plan:"small"},{type:"custom-branding",priceId:"pri_01hrs82d93psz8xbd0th4zq2kc",cycle:"monthly",plan:"medium"},{type:"custom-branding",priceId:"pri_01hrs889fqtyx145p4z9y5y098",cycle:"yearly",plan:"medium"},{type:"custom-branding",priceId:"pri_01hrs831b8rsatgmfs0997chfm",cycle:"monthly",plan:"large"},{type:"custom-branding",priceId:"pri_01hrs89hjzn15v2q27fa1xma7w",cycle:"yearly",plan:"large"},{type:"limit-increase",priceId:"pri_01hrs8dst6r7s01paf06epwrnh",cycle:"monthly"},{type:"limit-increase",priceId:"pri_01hrs8eb9782bb0kv9xt8zsa48",cycle:"yearly"}]}};let I,T,F=!1;async function Y(r){return F||(F=new Promise(async i=>{var u;let o="live_e27b1b4cc566e07cf684df948bf",c=o!=null&&o.startsWith("test_")?"sandbox":"production",s=await fetch("/api/v3/billing/paddle-customer-id"),p=((u=await s.json().catch(y=>console.log("Fetching Paddle Customer ID failed:",y)))==null?void 0:u.id)||null;r&&p&&r(p),I=await gr({token:o,environment:c,pwCustomer:{id:p}}),T=vr[c],T.env=c,i()})),await F}async function br(r="custom-branding",i="monthly",o=null){await Y();let c=T.items.filter(u=>!(u.type!==r||u.cycle!==i||o&&u.plan!==o));if(!c)return[];let s=await I.PricePreview({items:c.map(u=>({quantity:1,priceId:u.priceId}))}),p=(await ar(()=>import("./currency-symbol-map-c26614d8.js").then(u=>u.c),[])).default;return s.data.details.lineItems.map(u=>({name:u.price.name,total:parseFloat(u.totals.total)/100,currency:p(s.data.currencyCode),id:u.price.id}))}function _r(r){return r?(Number.isNaN(r)&&(r=parseFloat(r)),`${r}`.includes(".")?r.toFixed(2):r):""}async function Or({guildId:r,userId:i,type:o="custom-branding",priceId:c,transactionId:s=null,email:p=null,address:u=null}={}){await Y(),console.log("Starting checkout for",c||s);let y={settings:{displayMode:"overlay",theme:"light",locale:"en",allowLogout:!!p,frameStyle:"font-family: Onest !important"}};return s?y.transactionId=s:(y.settings.successUrl=`${T.env==="sandbox"?"http://127.0.0.1:3000":"https://dashboard.sapph.xyz"}/${r}/${o}/success`,y.items=[{quantity:1,priceId:c}],y.customData={guildId:r,userId:i}),p&&(y.customer={email:p}),I.Checkout.open(y),new Promise(m=>{I.Update({eventCallback:h=>{h.name==="checkout.closed"?m({status:"closed"}):h.name==="checkout.completed"&&m({status:"completed",data:h})}})})}async function Er(){await Y(),I.Checkout.close()}export{Er as c,_r as f,br as g,Y as i,Or as o};
